<!doctype html>
<html>
  <head>  
    <link type= "text/css" rel= "stylesheet" href="styles/style.css" />


    <title>Socket.IO chat</title>

  </head>
  <script src="scripts/script.js" type="text/JavaScript"></script>
 
  <body onload="getName()">

     <p>Welcome,<span id="welcome"> </span></p>

    <ul id="messages"></ul>
    <form action="">
      <input id="m" autocomplete="off" placeholder="Talk to me..." /><button>Send</button>
    </form>
    <script src="scripts/script.js" type="text/JavaScript"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    
    <script>
      var socket = io();
      $('form').submit(function(){
        var date = new Date(); // this is a construction
        console.log("date is " + date); // tells me what i'm looking at 
        if(date.getMinutes() < 10){ // because if the time was 1:02 it would return 1:2 I created an if/else to add in proper display!
          date = date.getHours() + ":0" + date.getMinutes();
        }else{
          date = date.getHours() + ":" + date.getMinutes();
        };

        socket.emit('chat message', {"name": name, "date": date, 'msg':$('#m').val()});
        $('#m').val(''); // this is to clear the msg bar 
        return false;
      });
      socket.on('chat message', function(msg){
        $('#messages').append($('<li>').text(msg['name']+ " (" + msg["date"] + "): " + msg['msg']));// submits msgs into the box and puts them below previous statements.
        
        console.log(msg);
      });
    </script>

  </body>
</html>